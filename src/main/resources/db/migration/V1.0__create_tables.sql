CREATE TABLE CONFERENCES
(
    id           BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name         VARCHAR(255) NOT NULL,
    startDate    TIMESTAMP    NOT NULL,
    endDate      TIMESTAMP    NOT NULL,
    active       BOOLEAN      NOT NULL DEFAULT FALSE,
    roomCapacity INTEGER      NOT NULL DEFAULT 0
);

CREATE TABLE PARTICIPANTS
(
    id            BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    personalCode  VARCHAR(255) NOT NULL UNIQUE,
    email         VARCHAR(255) NOT NULL UNIQUE,
    firstName     VARCHAR(255) NOT NULL,
    lastName      VARCHAR(255) NOT NULL,
    conference_id BIGINT       NOT NULL,
    CONSTRAINT fk_conference FOREIGN KEY (conference_id) REFERENCES conferences (id)
);

CREATE TABLE USERS
(
    id       BIGINT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255)        NOT NULL
);

CREATE TABLE ROLES
(
    role_id   BIGINT AUTO_INCREMENT PRIMARY KEY,
    authority VARCHAR(255) UNIQUE NOT NULL
);

CREATE TABLE USER_ROLES
(
    user_id BIGINT NOT NULL,
    role_id BIGINT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE,
    FOREIGN KEY (role_id) REFERENCES roles (role_id) ON DELETE CASCADE
);
